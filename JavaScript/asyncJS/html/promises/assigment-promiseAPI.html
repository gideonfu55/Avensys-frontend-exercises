<!DOCTYPE html>
<html lang="en">
<head>
  <title>Assignment - Promise All</title>
</head>

<body>
  <script>
    let p1 = new Promise((resolve, reject) => {
      setTimeout(() => {
        resolve("value 1")
        // reject("reject value 1")
      }, 1000)
    });

    let p2 = new Promise((resolve, reject) => {
      setTimeout(() => {
        resolve("value 2")
        // reject("reject value 2")
      }, 2000)
    });

    let p3 = new Promise((resolve, reject) => {
      setTimeout(() => {
        resolve("value 3")
        // reject("reject value 3")
      }, 3000)
    });

    // let promiseAll = Promise.all([p1, p2, p3])
    // promiseAll.then(value => {
    //   console.log(value)
    // })

    // Using forEach to loop through a Promise.all array and add an interval between each resolve/result:
    // let promiseAll = Promise.all([p1, p2, p3])
    // let interval = 0;
    // promiseAll.then(value => {
    //   value.forEach(promise => {
    //     setTimeout(() => {
    //       console.log(promise)
    //     }, interval += 1000)
    //   })
    // })

    // Refactored with async-await:
    async function executeIntervalThree() {
      let promiseAll2 = Promise.all([p1, p2, p3])
      let result = await promiseAll2
      let interval = 0

      return result.forEach(promise => {
        setTimeout(() => {
          console.log(promise)
        }, interval += 1000)
      })
    }

    async function executeThree() {
      let result1 = await p1
      let result2 = await p2
      let result3 = await p3

      console.log(result1)
      console.log(result2)
      console.log(result3)
      console.log('All three completed')
    }

    executeThree()
    executeIntervalThree()
  </script>
</body>
</html>